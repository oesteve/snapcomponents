/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/intl-messageformat@10.7.16/lib/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{__extends as e,__rest as t,__assign as r,__spreadArray as n}from"tslib";import{memoize as o,strategies as a}from"@formatjs/fast-memoize";import{isLiteralElement as i,isPoundElement as l,isArgumentElement as u,isDateElement as s,isDateTimeSkeleton as c,isTimeElement as m,isNumberElement as f,isNumberSkeleton as p,isTagElement as h,isSelectElement as y,isPluralElement as v,parse as d}from"@formatjs/icu-messageformat-parser";var g;!function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"}(g||(g={}));var I,b=function(t){function r(e,r,n){var o=t.call(this,e)||this;return o.code=r,o.originalMessage=n,o}return e(r,t),r.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},r}(Error),L=function(t){function r(e,r,n,o){return t.call(this,'Invalid values for "'.concat(e,'": "').concat(r,'". Options are "').concat(Object.keys(n).join('", "'),'"'),g.INVALID_VALUE,o)||this}return e(r,t),r}(b),w=function(t){function r(e,r,n){return t.call(this,'Value for "'.concat(e,'" must be of type ').concat(r),g.INVALID_VALUE,n)||this}return e(r,t),r}(b),N=function(t){function r(e,r){return t.call(this,'The intl string context variable "'.concat(e,'" was not provided to the string "').concat(r,'"'),g.MISSING_VALUE,r)||this}return e(r,t),r}(b);function A(e){return"function"==typeof e}function _(e,t,r,n,o,a,d){if(1===e.length&&i(e[0]))return[{type:I.literal,value:e[0].value}];for(var T=[],S=0,j=e;S<j.length;S++){var O=j[S];if(i(O))T.push({type:I.literal,value:O.value});else if(l(O))"number"==typeof a&&T.push({type:I.literal,value:r.getNumberFormat(t).format(a)});else{var D=O.value;if(!o||!(D in o))throw new N(D,d);var F=o[D];if(u(O))F&&"string"!=typeof F&&"number"!=typeof F||(F="string"==typeof F||"number"==typeof F?String(F):""),T.push({type:"string"==typeof F?I.literal:I.object,value:F});else if(s(O)){var V="string"==typeof O.style?n.date[O.style]:c(O.style)?O.style.parsedOptions:void 0;T.push({type:I.literal,value:r.getDateTimeFormat(t,V).format(F)})}else if(m(O)){V="string"==typeof O.style?n.time[O.style]:c(O.style)?O.style.parsedOptions:n.time.medium;T.push({type:I.literal,value:r.getDateTimeFormat(t,V).format(F)})}else if(f(O)){(V="string"==typeof O.style?n.number[O.style]:p(O.style)?O.style.parsedOptions:void 0)&&V.scale&&(F*=V.scale||1),T.push({type:I.literal,value:r.getNumberFormat(t,V).format(F)})}else{if(h(O)){var E=O.children,P=O.value,M=o[P];if(!A(M))throw new w(P,"function",d);var R=M(_(E,t,r,n,o,a).map((function(e){return e.value})));Array.isArray(R)||(R=[R]),T.push.apply(T,R.map((function(e){return{type:"string"==typeof e?I.literal:I.object,value:e}})))}if(y(O)){if(!(U=O.options[F]||O.options.other))throw new L(O.value,F,Object.keys(O.options),d);T.push.apply(T,_(U.value,t,r,n,o))}else if(v(O)){var U;if(!(U=O.options["=".concat(F)])){if(!Intl.PluralRules)throw new b('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',g.MISSING_INTL_API,d);var k=r.getPluralRules(t,{type:O.pluralType}).select(F-(O.offset||0));U=O.options[k]||O.options.other}if(!U)throw new L(O.value,F,Object.keys(O.options),d);T.push.apply(T,_(U.value,t,r,n,o,F-(O.offset||0)))}else;}}}return function(e){return e.length<2?e:e.reduce((function(e,t){var r=e[e.length-1];return r&&r.type===I.literal&&t.type===I.literal?r.value+=t.value:e.push(t),e}),[])}(T)}function T(e,t){return t?Object.keys(e).reduce((function(n,o){var a,i;return n[o]=(a=e[o],(i=t[o])?r(r(r({},a||{}),i||{}),Object.keys(a).reduce((function(e,t){return e[t]=r(r({},a[t]),i[t]||{}),e}),{})):a),n}),r({},e)):e}function S(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,r){e[t]=r}}}}}!function(e){e[e.literal=0]="literal",e[e.object=1]="object"}(I||(I={}));var j=function(){function e(i,l,u,s){void 0===l&&(l=e.defaultLocale);var c,m=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=m.formatToParts(e);if(1===t.length)return t[0].value;var r=t.reduce((function(e,t){return e.length&&t.type===I.literal&&"string"==typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e}),[]);return r.length<=1?r[0]||"":r},this.formatToParts=function(e){return _(m.ast,m.locales,m.formatters,m.formats,e,void 0,m.message)},this.resolvedOptions=function(){var e;return{locale:(null===(e=m.resolvedLocale)||void 0===e?void 0:e.toString())||Intl.NumberFormat.supportedLocalesOf(m.locales)[0]}},this.getAst=function(){return m.ast},this.locales=l,this.resolvedLocale=e.resolveLocale(l),"string"==typeof i){if(this.message=i,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var f=s||{};f.formatters;var p=t(f,["formatters"]);this.ast=e.__parse(i,r(r({},p),{locale:this.resolvedLocale}))}else this.ast=i;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=T(e.formats,u),this.formatters=s&&s.formatters||(void 0===(c=this.formatterCache)&&(c={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:o((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.NumberFormat).bind.apply(e,n([void 0],t,!1)))}),{cache:S(c.number),strategy:a.variadic}),getDateTimeFormat:o((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.DateTimeFormat).bind.apply(e,n([void 0],t,!1)))}),{cache:S(c.dateTime),strategy:a.variadic}),getPluralRules:o((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.PluralRules).bind.apply(e,n([void 0],t,!1)))}),{cache:S(c.pluralRules),strategy:a.variadic})})}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.resolveLocale=function(e){if(void 0!==Intl.Locale){var t=Intl.NumberFormat.supportedLocalesOf(e);return t.length>0?new Intl.Locale(t[0]):new Intl.Locale("string"==typeof e?e:e[0])}},e.__parse=d,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}();export{g as ErrorCode,b as FormatError,j as IntlMessageFormat,L as InvalidValueError,w as InvalidValueTypeError,N as MissingValueError,I as PART_TYPE,j as default,_ as formatToParts,A as isFormatXMLElementFn};
